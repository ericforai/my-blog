# ğŸ”§ Giscus è¯„è®ºç³»ç»Ÿé…ç½®æŒ‡å—

> Giscus æ˜¯ä¸€ä¸ªåŸºäº GitHub Discussions çš„å…è´¹å¼€æºè¯„è®ºç³»ç»Ÿ  
> é…ç½®æ—¶é—´ï¼š5 åˆ†é’Ÿ  
> æ›´æ–°æ—¶é—´ï¼š2025-10-08

---

## ğŸ“‹ é…ç½®æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»º GitHub ä»“åº“

1. **è®¿é—® GitHub**
   - ç™»å½• https://github.com
   - ç‚¹å‡»å³ä¸Šè§’ `+` â†’ `New repository`

2. **ä»“åº“è®¾ç½®**
   ```
   Repository name: my-blog-comments
   Description: åšå®¢è¯„è®ºç³»ç»Ÿ
   Visibility: Publicï¼ˆå¿…é¡»å…¬å¼€ï¼‰
   âœ… Add a README file
   ```

3. **åˆ›å»ºä»“åº“**
   - ç‚¹å‡» `Create repository`

---

### ç¬¬äºŒæ­¥ï¼šå¼€å¯ Discussions åŠŸèƒ½

1. **è¿›å…¥ä»“åº“è®¾ç½®**
   - ç‚¹å‡»ä»“åº“çš„ `Settings` æ ‡ç­¾é¡µ

2. **å¯ç”¨ Discussions**
   - æ»šåŠ¨åˆ° `Features` éƒ¨åˆ†
   - âœ… å‹¾é€‰ `Discussions`
   - ç‚¹å‡» `Set up discussions`

3. **åˆ›å»ºç¬¬ä¸€ä¸ª Discussion**
   - GitHub ä¼šè‡ªåŠ¨åˆ›å»ºæ¬¢è¿å¸–
   - ç‚¹å‡» `Start discussion` å®Œæˆè®¾ç½®

---

### ç¬¬ä¸‰æ­¥ï¼šå®‰è£… Giscus App

1. **è®¿é—® Giscus é…ç½®é¡µé¢**
   - https://giscus.app/zh-CN

2. **è¿æ¥ GitHub**
   - é¡µé¢ä¸­éƒ¨ä¼šæç¤º "å®‰è£… Giscus app"
   - ç‚¹å‡» `Install the giscus app on GitHub`

3. **æˆæƒä»“åº“**
   ```
   é€‰æ‹©æˆæƒæ–¹å¼ï¼š
   â—‹ All repositoriesï¼ˆæ‰€æœ‰ä»“åº“ï¼‰
   â— Only select repositoriesï¼ˆæ¨èï¼‰
     âœ… my-blog-comments
   ```

4. **ç¡®è®¤å®‰è£…**
   - ç‚¹å‡» `Install`
   - GitHub ä¼šé‡å®šå‘å› Giscus é…ç½®é¡µ

---

### ç¬¬å››æ­¥ï¼šç”Ÿæˆé…ç½®ä»£ç 

1. **å¡«å†™ä»“åº“ä¿¡æ¯**
   ```
   Repository: yourusername/my-blog-comments
   (æ›¿æ¢ä¸ºä½ çš„ GitHub ç”¨æˆ·å)
   ```

2. **Discussion æ˜ å°„æ–¹å¼**ï¼ˆæ¨èé€‰é¡¹ï¼‰
   ```
   â— pathnameï¼ˆè·¯å¾„åï¼‰
   æ¯ä¸ªé¡µé¢å¯¹åº”ä¸€ä¸ªç‹¬ç«‹çš„ Discussion
   ```

3. **Discussion åˆ†ç±»**
   ```
   â— Announcementsï¼ˆæ¨èï¼‰
   é€‚åˆè¯„è®ºåœºæ™¯
   ```

4. **åŠŸèƒ½é€‰é¡¹**
   ```
   âœ… å¯ç”¨ååº”ï¼ˆè®©è¯»è€…å¯ä»¥ç‚¹èµè¯„è®ºï¼‰
   â–¡ åœ¨ä¸»å¸–å­ä¸Šæ–¹æ˜¾ç¤ºè¯„è®ºè¾“å…¥æ¡†ï¼ˆå¯é€‰ï¼‰
   âœ… æ‡’åŠ è½½è¯„è®ºï¼ˆæå‡æ€§èƒ½ï¼‰
   ```

5. **ä¸»é¢˜**
   ```
   â— preferred_color_scheme
   è‡ªåŠ¨é€‚é…æµ…è‰²/æ·±è‰²æ¨¡å¼
   ```

---

### ç¬¬äº”æ­¥ï¼šå¤åˆ¶é…ç½®ä»£ç 

é…ç½®å®Œæˆåï¼Œé¡µé¢åº•éƒ¨ä¼šç”Ÿæˆç±»ä¼¼ä»£ç ï¼š

```html
<script src="https://giscus.app/client.js"
        data-repo="yourusername/my-blog-comments"
        data-repo-id="R_kgDOxxxxxxxxxx"
        data-category="Announcements"
        data-category-id="DIC_kwDOxxxxxxxxxx"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>
```

**é‡è¦**ï¼šè®°å½•ä»¥ä¸‹å‚æ•°ï¼ˆéœ€è¦å¡«å…¥ç½‘ç«™é…ç½®ï¼‰
```
data-repo="yourusername/my-blog-comments"
data-repo-id="R_kgDOxxxxxxxxxx"  â† å¤åˆ¶è¿™ä¸ª
data-category-id="DIC_kwDOxxxxxxxxxx"  â† å¤åˆ¶è¿™ä¸ª
```

---

### ç¬¬å…­æ­¥ï¼šæ›´æ–°ç½‘ç«™é…ç½®

æ‰“å¼€ `src/layouts/PostLayout.astro`ï¼Œæ‰¾åˆ° Giscus é…ç½®éƒ¨åˆ†ï¼Œæ›´æ–°å‚æ•°ï¼š

```typescript
// ç¬¬ 121-124 è¡Œï¼Œæ›´æ–°ä¸ºä½ çš„å®é™…å€¼
script.setAttribute('data-repo', 'yourusername/my-blog-comments');
script.setAttribute('data-repo-id', 'R_kgDOxxxxxxxxxx');  // ä» Giscus å¤åˆ¶
script.setAttribute('data-category-id', 'DIC_kwDOxxxxxxxxxx');  // ä» Giscus å¤åˆ¶
```

**å®Œæ•´ç¤ºä¾‹**ï¼š
```typescript
<script is:inline>
  const script = document.createElement('script');
  script.src = 'https://giscus.app/client.js';
  script.setAttribute('data-repo', 'eric/my-blog-comments');  // â† æ”¹è¿™é‡Œ
  script.setAttribute('data-repo-id', 'R_kgDOL5xKpQ');  // â† æ”¹è¿™é‡Œ
  script.setAttribute('data-category', 'Announcements');
  script.setAttribute('data-category-id', 'DIC_kwDOL5xKpc4CkK8h');  // â† æ”¹è¿™é‡Œ
  script.setAttribute('data-mapping', 'pathname');
  script.setAttribute('data-strict', '0');
  script.setAttribute('data-reactions-enabled', '1');
  script.setAttribute('data-emit-metadata', '0');
  script.setAttribute('data-input-position', 'top');
  script.setAttribute('data-theme', 'preferred_color_scheme');
  script.setAttribute('data-lang', 'zh-CN');
  script.setAttribute('crossorigin', 'anonymous');
  script.async = true;
  
  const giscusContainer = document.querySelector('.giscus');
  if (giscusContainer) {
    giscusContainer.innerHTML = '';
    giscusContainer.appendChild(script);
  }
</script>
```

---

## âœ… éªŒè¯é…ç½®

### æœ¬åœ°æµ‹è¯•

1. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run dev
   ```

2. **è®¿é—®ä»»æ„æ–‡ç« **
   ```
   http://localhost:4321/blog/ai-marketing-revolution
   ```

3. **æ£€æŸ¥è¯„è®ºåŒº**
   - æ»šåŠ¨åˆ°æ–‡ç« åº•éƒ¨
   - åº”è¯¥çœ‹åˆ° Giscus è¯„è®ºæ¡†
   - å¦‚æœçœ‹åˆ°åŠ è½½é”™è¯¯ï¼Œæ£€æŸ¥é…ç½®å‚æ•°

### åœ¨çº¿æµ‹è¯•

1. **éƒ¨ç½²ç½‘ç«™**
   ```bash
   npm run build
   # éƒ¨ç½²åˆ° Vercel/Netlify/GitHub Pages
   ```

2. **å‘å¸ƒè¯„è®ºæµ‹è¯•**
   - ç”¨ GitHub è´¦å·ç™»å½•
   - å‘å¸ƒä¸€æ¡æµ‹è¯•è¯„è®º
   - åˆ·æ–°é¡µé¢æŸ¥çœ‹æ˜¯å¦æ˜¾ç¤º

3. **æ£€æŸ¥ GitHub Discussions**
   - è®¿é—® `https://github.com/yourusername/my-blog-comments/discussions`
   - åº”è¯¥çœ‹åˆ°è‡ªåŠ¨åˆ›å»ºçš„ Discussion

---

## ğŸ¨ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹ä¸»é¢˜é¢œè‰²

Giscus æ”¯æŒå¤šç§ä¸»é¢˜ï¼š

```typescript
// æµ…è‰²ä¸»é¢˜
script.setAttribute('data-theme', 'light');

// æ·±è‰²ä¸»é¢˜
script.setAttribute('data-theme', 'dark');

// è‡ªåŠ¨é€‚é…ï¼ˆæ¨èï¼‰
script.setAttribute('data-theme', 'preferred_color_scheme');

// GitHub é£æ ¼
script.setAttribute('data-theme', 'github_light');
script.setAttribute('data-theme', 'github_dark');

// è‡ªå®šä¹‰ CSS
script.setAttribute('data-theme', 'https://yourdomain.com/giscus-custom.css');
```

### ä¿®æ”¹è¯„è®ºè¾“å…¥æ¡†ä½ç½®

```typescript
// è¾“å…¥æ¡†åœ¨ä¸Šæ–¹ï¼ˆæ¨èï¼Œæ–¹ä¾¿è¯„è®ºï¼‰
script.setAttribute('data-input-position', 'top');

// è¾“å…¥æ¡†åœ¨ä¸‹æ–¹
script.setAttribute('data-input-position', 'bottom');
```

### ä¿®æ”¹è¯­è¨€

```typescript
// ä¸­æ–‡
script.setAttribute('data-lang', 'zh-CN');

// è‹±æ–‡
script.setAttribute('data-lang', 'en');

// ç¹ä½“ä¸­æ–‡
script.setAttribute('data-lang', 'zh-TW');
```

---

## ğŸ”’ éšç§ä¸å®‰å…¨

### Giscus å¦‚ä½•ä¿æŠ¤éšç§ï¼Ÿ

1. **æ— ç¬¬ä¸‰æ–¹è¿½è¸ª**
   - ä¸ä½¿ç”¨ Google Analytics ç­‰è¿½è¸ªå·¥å…·
   - ä¸æ”¶é›†ç”¨æˆ·ä¸ªäººæ•°æ®

2. **GitHub è´¦å·ç™»å½•**
   - è¯„è®ºéœ€è¦ GitHub è´¦å·
   - è‡ªåŠ¨è¿‡æ»¤åƒåœ¾è¯„è®º
   - æ–¹ä¾¿ç®¡ç†å’Œå®¡æ ¸

3. **æ•°æ®å­˜å‚¨**
   - æ‰€æœ‰è¯„è®ºå­˜å‚¨åœ¨ä½ çš„ GitHub Discussions
   - ä½ å®Œå…¨æŒæ§æ•°æ®
   - å¯éšæ—¶å¯¼å‡ºæˆ–åˆ é™¤

---

## â“ å¸¸è§é—®é¢˜

### Q1: è¯„è®ºä¸æ˜¾ç¤ºæ€ä¹ˆåŠï¼Ÿ

**æ£€æŸ¥æ¸…å•**ï¼š
- [ ] ä»“åº“æ˜¯å¦è®¾ä¸º Publicï¼Ÿ
- [ ] Discussions åŠŸèƒ½æ˜¯å¦å¼€å¯ï¼Ÿ
- [ ] Giscus App æ˜¯å¦å·²å®‰è£…ï¼Ÿ
- [ ] `data-repo-id` å’Œ `data-category-id` æ˜¯å¦æ­£ç¡®ï¼Ÿ
- [ ] æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰æŠ¥é”™ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# 1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
# 2. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
# 3. è®¿é—® https://github.com/yourusername/my-blog-comments/discussions
# 4. ç¡®è®¤ Discussion æ˜¯å¦è‡ªåŠ¨åˆ›å»º
```

---

### Q2: å¦‚ä½•åˆ é™¤/ç¼–è¾‘è¯„è®ºï¼Ÿ

1. **è¯„è®ºè€…æœ¬äºº**
   - é¼ æ ‡æ‚¬åœåœ¨è¯„è®ºä¸Š
   - ç‚¹å‡» `...` èœå•
   - é€‰æ‹© Edit / Delete

2. **åšå®¢ç®¡ç†å‘˜ï¼ˆä½ ï¼‰**
   - è®¿é—® GitHub Discussions
   - æ‰¾åˆ°å¯¹åº”çš„è¯„è®º
   - å¯ä»¥ç¼–è¾‘/åˆ é™¤ä»»ä½•è¯„è®º

---

### Q3: å¦‚ä½•é˜²æ­¢åƒåœ¾è¯„è®ºï¼Ÿ

**å†…ç½®ä¿æŠ¤**ï¼š
- éœ€è¦ GitHub è´¦å·æ‰èƒ½è¯„è®ºï¼ˆå¤©ç„¶é—¨æ§›ï¼‰
- GitHub çš„ååƒåœ¾ç³»ç»Ÿ

**é¢å¤–è®¾ç½®**ï¼š
```typescript
// å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼ˆåªå…è®¸å·²æœ‰ Discussion çš„é¡µé¢è¯„è®ºï¼‰
script.setAttribute('data-strict', '1');

// è®¾ç½®è¯„è®ºå®¡æ ¸ï¼ˆéœ€æ‰‹åŠ¨æ‰¹å‡†ï¼‰
// åœ¨ GitHub Discussions è®¾ç½®ä¸­å¼€å¯ "Require approval"
```

---

### Q4: è¯„è®ºæ•°æ®ä¼šä¸¢å¤±å—ï¼Ÿ

**ä¸ä¼šï¼**
- è¯„è®ºå­˜å‚¨åœ¨ GitHubï¼ˆå…¨çƒæœ€å¯é çš„ä»£ç æ‰˜ç®¡å¹³å°ï¼‰
- ä½ æ‹¥æœ‰å®Œå…¨æ§åˆ¶æƒ
- å¯éšæ—¶å¯¼å‡ºæ•°æ®

**å¤‡ä»½æ–¹æ¡ˆ**ï¼š
```bash
# ä½¿ç”¨ GitHub API å®šæœŸå¤‡ä»½è¯„è®º
curl -H "Authorization: token YOUR_TOKEN" \
     https://api.github.com/repos/yourusername/my-blog-comments/discussions \
     > comments_backup.json
```

---

### Q5: å¦‚ä½•è¿ç§»åˆ°å…¶ä»–è¯„è®ºç³»ç»Ÿï¼Ÿ

å¦‚æœæœªæ¥æƒ³æ¢è¯„è®ºç³»ç»Ÿï¼š

1. **å¯¼å‡ºæ•°æ®**
   - ä½¿ç”¨ GitHub API å¯¼å‡ºæ‰€æœ‰ Discussions
   - æ ¼å¼ï¼šJSON

2. **è½¬æ¢æ ¼å¼**
   - ç¼–å†™è„šæœ¬è½¬æ¢ä¸ºç›®æ ‡ç³»ç»Ÿæ ¼å¼
   - å¸¸è§ç›®æ ‡ï¼šDisqusã€Commento

3. **å¯¼å…¥æ–°ç³»ç»Ÿ**
   - å„ç³»ç»Ÿéƒ½æä¾›å¯¼å…¥åŠŸèƒ½

---

## ğŸ“Š è¯„è®ºæ•°æ®ç»Ÿè®¡

### æŸ¥çœ‹è¯„è®ºç»Ÿè®¡

è®¿é—®ä»“åº“çš„ Insightsï¼š
```
https://github.com/yourusername/my-blog-comments/pulse
```

å¯ä»¥çœ‹åˆ°ï¼š
- è¯„è®ºæ€»æ•°
- æ´»è·ƒç”¨æˆ·
- äº’åŠ¨è¶‹åŠ¿

### é›†æˆ Google Analytics

åœ¨è¯„è®ºäº‹ä»¶ä¸­æ·»åŠ  GA è¿½è¸ªï¼š

```typescript
// ç›‘å¬è¯„è®ºæäº¤äº‹ä»¶
window.addEventListener('message', (event) => {
  if (event.origin !== 'https://giscus.app') return;
  
  const giscusData = event.data;
  if (giscusData.discussion) {
    // å‘é€ GA äº‹ä»¶
    gtag('event', 'comment_posted', {
      page_path: window.location.pathname
    });
  }
});
```

---

## ğŸš€ è¿›é˜¶åŠŸèƒ½

### åŠŸèƒ½ 1ï¼šè¯„è®ºç»Ÿè®¡ç»„ä»¶

åˆ›å»ºä¸€ä¸ªæ˜¾ç¤ºè¯„è®ºæ•°çš„ç»„ä»¶ï¼š

```astro
---
// src/components/CommentCount.astro
interface Props {
  slug: string;
}
const { slug } = Astro.props;
---

<span class="comment-count" data-slug={slug}>
  <span class="loading">åŠ è½½ä¸­...</span>
</span>

<script>
  // é€šè¿‡ GitHub API è·å–è¯„è®ºæ•°
  const elements = document.querySelectorAll('.comment-count');
  elements.forEach(async (el) => {
    const slug = el.getAttribute('data-slug');
    // å®ç° API è°ƒç”¨...
  });
</script>
```

### åŠŸèƒ½ 2ï¼šè¯„è®ºé€šçŸ¥

è®¾ç½® GitHub é€šçŸ¥ï¼ŒåŠæ—¶æ”¶åˆ°æ–°è¯„è®ºï¼š

1. è®¿é—® `https://github.com/settings/notifications`
2. ç¡®ä¿å¼€å¯ `Discussions` é€šçŸ¥
3. é€‰æ‹©é€šçŸ¥æ–¹å¼ï¼š
   - âœ… Email
   - âœ… Webï¼ˆGitHub ç«™å†…ï¼‰
   - âœ… Mobileï¼ˆGitHub Appï¼‰

---

## âœ¨ æœ€ä½³å®è·µ

### 1. é¼“åŠ±äº’åŠ¨

åœ¨æ–‡ç« ç»“å°¾æ·»åŠ ï¼š
```markdown
ğŸ’¬ ä½ æœ‰ä»€ä¹ˆæƒ³æ³•ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ï¼
ğŸ¤ å¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹
```

### 2. åŠæ—¶å›å¤

- æ–°è¯„è®º 24 å°æ—¶å†…å›å¤
- å»ºç«‹ç¤¾åŒºæ°›å›´
- æå‡ç”¨æˆ·ç²˜æ€§

### 3. ç²¾åè¯„è®ºç½®é¡¶

åœ¨ GitHub Discussions ä¸­ï¼š
- ç‚¹èµä¼˜è´¨è¯„è®º
- æ ‡è®°ä¸º "Answered"
- å›ºå®šé‡è¦è®¨è®º

---

## ğŸ“š ç›¸å…³èµ„æº

- [Giscus å®˜ç½‘](https://giscus.app/zh-CN)
- [GitHub Discussions æ–‡æ¡£](https://docs.github.com/en/discussions)
- [Giscus GitHub ä»“åº“](https://github.com/giscus/giscus)

---

## ğŸ‰ å®Œæˆï¼

é…ç½®å®Œæˆåï¼Œä½ çš„åšå®¢å°±æœ‰äº†ä¸€ä¸ªï¼š
- âœ… å…è´¹å¼€æºçš„è¯„è®ºç³»ç»Ÿ
- âœ… æ— éœ€æ•°æ®åº“
- âœ… GitHub è´¦å·ç™»å½•ï¼ˆé˜²åƒåœ¾ï¼‰
- âœ… å®Œå…¨æŒæ§æ•°æ®
- âœ… æ”¯æŒæ·±è‰²æ¨¡å¼
- âœ… å“åº”å¼è®¾è®¡

**ä¸‹ä¸€æ­¥**ï¼šå‘å¸ƒä½ çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œé‚€è¯·è¯»è€…è¯„è®ºäº’åŠ¨ï¼ğŸš€

---

*æœ€åæ›´æ–°ï¼š2025-10-08*  
*æœ‰é—®é¢˜ï¼Ÿåœ¨ GitHub æ Issue æˆ–åœ¨è¯„è®ºåŒºç•™è¨€ï¼*

