---
import PageLayout from '~/layouts/PageLayout.astro';

// è·å–æ‰€æœ‰åˆ†ç±»
export async function getStaticPaths() {
  return [
    { params: { category: 'ai-trends' } },
    { params: { category: 'ai-marketing' } },
    { params: { category: 'ai-tools' } },
    { params: { category: 'tech-tutorial' } },
    { params: { category: 'insights' } },
    { params: { category: 'resources' } },
  ];
}

const { category } = Astro.params;

// åˆ†ç±»ä¿¡æ¯æ˜ å°„ï¼ˆä¸­æ–‡ç‰ˆï¼‰
const categoryInfo: Record<string, { name: string; description: string; icon: string }> = {
  'ai-trends': {
    name: 'AI è¶‹åŠ¿',
    description: 'å‰æ²¿æŠ€æœ¯è§£è¯»ä¸è¡Œä¸šè¶‹åŠ¿é¢„æµ‹',
    icon: 'ğŸ”®'
  },
  'ai-marketing': {
    name: 'AI è¥é”€',
    description: 'è¥é”€åœºæ™¯åŒ–åº”ç”¨ä¸å®æˆ˜æ¡ˆä¾‹',
    icon: 'ğŸ“ˆ'
  },
  'ai-tools': {
    name: 'AI å·¥å…·',
    description: 'å·¥å…·æµ‹è¯„ã€ä½¿ç”¨æ•™ç¨‹ä¸å¯¹æ¯”åˆ†æ',
    icon: 'ğŸ› ï¸'
  },
  'tech-tutorial': {
    name: 'æç¤ºè¯å·¥ç¨‹',
    description: 'Prompt Engineering æŠ€å·§ã€æœ€ä½³å®è·µä¸å®æˆ˜æ¡ˆä¾‹',
    icon: 'ğŸ’»'
  },
  'insights': {
    name: 'æ·±åº¦æ´å¯Ÿ',
    description: 'æ·±åº¦è§‚å¯Ÿã€ç‹¬ç«‹æ€è€ƒä¸ä¸ªäººè§‚ç‚¹',
    icon: 'ğŸ’¡'
  },
  'resources': {
    name: 'å­¦ä¹ èµ„æº',
    description: 'ç²¾é€‰èµ„æºã€å®šæœŸæ›´æ–°ã€é«˜å¤è®¿ä»·å€¼',
    icon: 'ğŸ“š'
  }
};

// æ–‡ç« æ•°æ®ï¼ˆæŒ‰åˆ†ç±»ï¼‰
const allPosts: Record<string, Array<{
  title: string;
  description: string;
  pubDate: string;
  slug: string;
  tags: string[];
}>> = {
  'ai-trends': [
    {
      title: "AI æœªæ¥åå¹´çš„å…³é”®è¯ï¼šé‡æ–°å®šä¹‰æ™ºèƒ½æ—¶ä»£çš„è¾¹ç•Œ",
      description: "ä» AGI åˆ°å¤šæ¨¡æ€ï¼Œä»å¼€æºé©å‘½åˆ°ä¼¦ç†è§‰é†’ï¼Œè§£è¯»æœªæ¥åå¹´å°†ä¸»å¯¼ AI å‘å±•çš„ 10 ä¸ªæ ¸å¿ƒå…³é”®è¯",
      pubDate: "2025-10-07",
      slug: "ai-future-decade-keywords",
      tags: ["AI", "æœªæ¥è¶‹åŠ¿", "AGI", "å¤šæ¨¡æ€AI"]
    },
    {
      title: "2025 AI å¤§æ¨¡å‹æ’è¡Œæ¦œï¼šGPT-5 vs Claude 4 vs Gemini 2.0 å…¨é¢å¯¹æ¯”",
      description: "æœ€æ–° AI å¤§æ¨¡å‹å®æµ‹å¯¹æ¯”ï¼Œæ¶µç›–æ€§èƒ½ã€ä»·æ ¼ã€åº”ç”¨åœºæ™¯å…¨æ–¹ä½è¯„æµ‹ï¼Œå¸®ä½ é€‰å‡ºæœ€é€‚åˆçš„ AI æ¨¡å‹",
      pubDate: "2025-10-08",
      slug: "ai-model-ranking-2025",
      tags: ["AIæ¨¡å‹", "GPT-5", "Claude", "Gemini", "æ¨¡å‹å¯¹æ¯”"]
    }
  ],
  'ai-marketing': [
    {
      title: "AI é‡å¡‘è¥é”€ï¼šä»å†…å®¹ç”Ÿäº§åˆ°ç²¾å‡†æŠ•æ”¾çš„å…¨é“¾è·¯é©å‘½",
      description: "æ·±åº¦è§£æ AI å¦‚ä½•æ”¹å˜è¥é”€çš„æ¯ä¸ªç¯èŠ‚ï¼Œä»æ–‡æ¡ˆåˆ›ä½œã€è§†è§‰è®¾è®¡åˆ°æ•°æ®åˆ†æï¼Œé™„å®æˆ˜æ¡ˆä¾‹ä¸å·¥å…·æ¨è",
      pubDate: "2025-10-07",
      slug: "ai-marketing-revolution",
      tags: ["AIè¥é”€", "æ•°å­—è¥é”€", "è¥é”€è‡ªåŠ¨åŒ–"]
    },
    {
      title: "ç”¨ AI å†™çˆ†æ¬¾æ–‡æ¡ˆï¼š5 ä¸ª Prompt æ¨¡æ¿",
      description: "ç»è¿‡å®æˆ˜æ£€éªŒçš„ AI æ–‡æ¡ˆæ¨¡æ¿ï¼Œæ¶µç›–è¥é”€æ–‡æ¡ˆã€ç¤¾äº¤åª’ä½“ã€ç”µå•†äº§å“é¡µç­‰åœºæ™¯ï¼ŒåŠ©ä½  10 åˆ†é’Ÿäº§å‡ºä¸“ä¸šçº§æ–‡æ¡ˆ",
      pubDate: "2025-01-03",
      slug: "ai-copywriting-prompts",
      tags: ["AIè¥é”€", "æ–‡æ¡ˆå†™ä½œ", "Promptæ¨¡æ¿", "è¥é”€æ–‡æ¡ˆ", "ChatGPT"]
    }
  ],
  'ai-tools': [
    {
      title: "2025 å¹´å¿…å¤‡çš„ 10 ä¸ª AI å·¥å…·ï¼šè®©ç”Ÿäº§åŠ›é£è·ƒçš„ç§˜å¯†æ­¦å™¨",
      description: "ç²¾é€‰ 10 ä¸ªç»è¿‡å®æˆ˜æ£€éªŒçš„ AI å·¥å…·ï¼Œæ¶µç›–å†™ä½œã€ç¼–ç¨‹ã€è®¾è®¡ã€æ•°æ®åˆ†æç­‰åœºæ™¯ï¼Œé™„ä½¿ç”¨æŠ€å·§ä¸å¯¹æ¯”è¯„æµ‹",
      pubDate: "2025-10-07",
      slug: "ai-tools-2025",
      tags: ["AIå·¥å…·", "ç”Ÿäº§åŠ›", "ChatGPT", "Midjourney"]
    }
  ],
  'tech-tutorial': [
    {
      title: "Prompt Engineeringï¼šAI æ—¶ä»£çš„æ–°ç¼–ç¨‹è¯­è¨€",
      description: "æ·±å…¥æ¢ç´¢ Prompt Engineering çš„æ ¸å¿ƒåŸç†ã€å®ç”¨æŠ€å·§ä¸æœ€ä½³å®è·µï¼ŒæŒæ¡ä¸ AI å¯¹è¯çš„è‰ºæœ¯",
      pubDate: "2025-10-07",
      slug: "prompt-engineering",
      tags: ["AI", "Prompt Engineering", "ChatGPT", "æŠ€æœ¯æ•™ç¨‹"]
    }
  ],
  'insights': [],
  'resources': []
};

const currentCategory = categoryInfo[category as string];
const posts = allPosts[category as string] || [];

// æ ¼å¼åŒ–æ—¥æœŸ
const formatDate = (date: string) => {
  return new Date(date).toLocaleDateString('zh-CN', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  });
};
---

<PageLayout 
  title={`${currentCategory?.name} - AIå°å­©`} 
  description={currentCategory?.description}
>
  <div class="mx-auto max-w-7xl px-4 py-16 sm:px-6 lg:px-8">
    
    <div class="mb-12">
      <div class="flex items-center gap-3 mb-4">
        <span class="text-5xl">{currentCategory?.icon}</span>
        <h1 class="text-page-title">{currentCategory?.name}</h1>
      </div>
      <p class="text-xl text-gray-600 dark:text-gray-400">
        {currentCategory?.description}
      </p>
      <div class="mt-4">
        <a href="/zh/blog" class="text-primary hover:underline">
          â† è¿”å›æ‰€æœ‰æ–‡ç« 
        </a>
      </div>
    </div>

    <!-- æ–‡ç« åˆ—è¡¨ -->
    {posts.length > 0 ? (
      <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
        {posts.map((post) => (
          <article class="group flex flex-col overflow-hidden rounded-lg border border-gray-200 transition-all hover:shadow-lg dark:border-gray-800">
            <!-- æ–‡ç« å°é¢ -->
            <div class="aspect-video bg-gradient-to-br from-primary/20 to-accent/20">
              <div class="flex h-full items-center justify-center">
                <span class="text-4xl">{currentCategory?.icon}</span>
              </div>
            </div>
            
            <!-- æ–‡ç« ä¿¡æ¯ -->
            <div class="flex flex-1 flex-col p-6">
              <div class="flex items-center gap-2 mb-2">
                <span class="text-sm text-gray-500 dark:text-gray-400">
                  {formatDate(post.pubDate)}
                </span>
                <span class="text-sm text-primary font-medium">
                  {currentCategory?.name}
                </span>
              </div>
              
              <h2 class="text-xl font-bold mb-3 group-hover:text-primary transition-colors">
                <a href={`/zh/blog/${post.slug}`} class="block">
                  {post.title}
                </a>
              </h2>
              
              <p class="text-gray-600 dark:text-gray-400 mb-4 flex-1">
                {post.description}
              </p>
              
              <!-- æ ‡ç­¾ -->
              <div class="flex flex-wrap gap-2 mb-4">
                {post.tags.slice(0, 3).map((tag) => (
                  <span class="px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded">
                    {tag}
                  </span>
                ))}
                {post.tags.length > 3 && (
                  <span class="px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded">
                    +{post.tags.length - 3}
                  </span>
                )}
              </div>
              
              <a 
                href={`/zh/blog/${post.slug}`} 
                class="text-primary hover:underline font-medium text-sm"
              >
                é˜…è¯»å…¨æ–‡ â†’
              </a>
            </div>
          </article>
        ))}
      </div>
    ) : (
      <!-- ç©ºçŠ¶æ€ -->
      <div class="text-center py-16">
        <div class="text-6xl mb-4">{currentCategory?.icon}</div>
        <h3 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">
          {currentCategory?.name} åˆ†ç±»æš‚æ— æ–‡ç« 
        </h3>
        <p class="text-gray-600 dark:text-gray-400 mb-8 max-w-md mx-auto">
          æˆ‘ä»¬æ­£åœ¨åŠªåŠ›åˆ›ä½œæ›´å¤šä¼˜è´¨å†…å®¹ï¼Œæ•¬è¯·æœŸå¾…ï¼
        </p>
        <div class="flex justify-center gap-4">
          <a href="/zh/blog" class="btn btn-primary">
            æŸ¥çœ‹æ‰€æœ‰æ–‡ç« 
          </a>
          <a href="/zh/" class="btn btn-ghost">
            è¿”å›é¦–é¡µ
          </a>
        </div>
      </div>
    )}
  </div>
</PageLayout>
