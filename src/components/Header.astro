---
import { SITE } from '~/config.mjs';
import { getLocaleFromPath, getTranslation } from '~/i18n/ui.ts';
import LanguagePicker from './LanguagePicker.astro';

// Get current locale from URL
const currentLocale = getLocaleFromPath(Astro.url.pathname);

// Get translated navigation items
const navItems = [
  { key: 'nav.home', href: currentLocale === 'en' ? '/' : '/zh/' },
  { key: 'nav.blog', href: currentLocale === 'en' ? '/blog' : '/zh/blog' },
  { key: 'nav.about', href: currentLocale === 'en' ? '/about' : '/zh/about' },
];
---

<header class="sticky top-0 z-40 border-b border-gray-200 bg-white/80 backdrop-blur-lg dark:border-gray-800 dark:bg-slate-900/80">
  <nav class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="flex h-16 items-center justify-between">
      <div class="flex items-center">
        <a href="/" class="flex items-center space-x-2">
          <img src="/logo.svg" alt="Logo" class="h-8 w-8" />
          <span class="text-xl font-bold">{SITE.title}</span>
        </a>
      </div>
      
      <div class="hidden md:flex md:items-center md:space-x-8">
        {navItems.map(item => (
          <a 
            href={item.href} 
            class="text-gray-700 hover:text-primary dark:text-gray-300 dark:hover:text-primary"
          >
            {getTranslation(currentLocale, item.key)}
          </a>
        ))}
        <LanguagePicker />
      </div>
    </div>
  </nav>
</header>

